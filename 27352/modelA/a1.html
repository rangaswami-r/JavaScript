<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sky Jumper</title>
<style>
  canvas {
    border: 1px solid #000;
    display: block;
    margin: auto;
  }
  body {
    font-family: 'Arial', sans-serif;
    background-color: #f0f0f0;
  }
</style>
</head>
<body>
<canvas id="gameCanvas" width="480" height="320"></canvas>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
  $(document).ready(function() {
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const canvasWidth = canvas.width;
    const canvasHeight = canvas.height;

    // Game variables
    let player = { x: 50, y: 100, vy: 0, jump: -10, width: 30, height: 30, speed: 3 };
    let platforms = [{ x: 0, y: 250, width: 150, height: 20 }, { x: 200, y: 200, width: 100, height: 20 }];
    let obstacles = [{ x: 150, y: 230, width: 20, height: 20 }];
    let powerUps = [{ x: 300, y: 180, type: 'score', bonus: 50 }];
    let score = 0;
    let gameOver = false;

    // Draw everything
    function draw() {
      ctx.clearRect(0, 0, canvasWidth, canvasHeight);
      ctx.fillStyle = '#333';
      // Draw player
      ctx.fillRect(player.x, player.y, player.width, player.height);
      // Draw platforms
      platforms.forEach(platform => {
        ctx.fillRect(platform.x, platform.y, platform.width, platform.height);
      });
      // Draw obstacles
      obstacles.forEach(obs => {
        ctx.fillStyle = 'red';
        ctx.fillRect(obs.x, obs.y, obs.width, obs.height);
        ctx.fillStyle = '#333';
      });
      // Draw power-ups
      powerUps.forEach(powerUp => {
        ctx.fillStyle = 'yellow';
        ctx.beginPath();
        ctx.arc(powerUp.x, powerUp.y, 5, 0, 2 * Math.PI);
        ctx.fill();
        ctx.fillStyle = '#333';
      });
      // Score
      ctx.font = "24px Arial";
      ctx.fillText(`Score: ${score}`, 10, 30);
    }

    // Update game state
    function update() {
      if (gameOver) return;
      player.vy += 0.5; // gravity
      player.y += player.vy;
      player.vy *= 0.9; // friction

      // Collision with platforms
      platforms.forEach(platform => {
        if (checkCollision(player, platform)) {
          player.vy = 0;
          player.y = platform.y - player.height;
        }
      });

      // Collision with obstacles
      obstacles.forEach((obstacle, index) => {
        if (checkCollision(player, obstacle)) {
          gameOver = true;
        }
      });

      // Collect power-ups
      powerUps.forEach((powerUp, index) => {
        if (checkCollision(player, powerUp)) {
          score += powerUp.bonus;
          powerUps.splice(index, 1);
        }
      });

      // Scoring for platforms
      platforms.forEach(() => {
        if (player.x > canvasWidth) {
          score += 10;
          player.x = 50;
        }
      });

      draw();
    }

    // Check collision
    function checkCollision(a, b) {
      return a.x < b.x + b.width &&
             a.x + a.width > b.x &&
             a.y < b.y + b.height &&
             a.y + a.height > b.y;
    }

    // Input handling
    document.addEventListener('keydown', function(event) {
      if (event.key === ' ' && player.vy === 0) {
        player.vy = player.jump;
      }
    });

    // Main game loop
    setInterval(update, 1000/60);
  });
</script>
</body>
</html>
